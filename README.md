# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Vite

Структура проекта:

- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:

- index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/main.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск

Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```

## Сборка

```
npm run build
```

или

```
yarn build
```

# Интернет-магазин «Web-Larёk»

«Web-Larёk» — это интернет-магазин с товарами для веб-разработчиков, где пользователи могут просматривать товары, добавлять их в корзину и оформлять заказы. Сайт предоставляет удобный интерфейс с модальными окнами для просмотра деталей товаров, управления корзиной и выбора способа оплаты, обеспечивая полный цикл покупки с отправкой заказов на сервер.

## Архитектура приложения

Код приложения разделен на слои согласно парадигме MVP (Model-View-Presenter), которая обеспечивает четкое разделение ответственности между классами слоев Model и View. Каждый слой несет свой смысл и ответственность:

Model - слой данных, отвечает за хранение и изменение данных.  
View - слой представления, отвечает за отображение данных на странице.  
Presenter - презентер содержит основную логику приложения и отвечает за связь представления и данных.

Взаимодействие между классами обеспечивается использованием событийно-ориентированного подхода. Модели и Представления генерируют события при изменении данных или взаимодействии пользователя с приложением, а Презентер обрабатывает эти события используя методы как Моделей, так и Представлений.

### Базовый код

#### Класс Component

Является базовым классом для всех компонентов интерфейса.
Класс является дженериком и принимает в переменной `T` тип данных, которые могут быть переданы в метод `render` для отображения.

Конструктор:  
`constructor(container: HTMLElement)` - принимает ссылку на DOM элемент за отображение, которого он отвечает.

Поля класса:  
`container: HTMLElement` - поле для хранения корневого DOM элемента компонента.

Методы класса:  
`render(data?: Partial<T>): HTMLElement` - Главный метод класса. Он принимает данные, которые необходимо отобразить в интерфейсе, записывает эти данные в поля класса и возвращает ссылку на DOM-элемент. Предполагается, что в классах, которые будут наследоваться от `Component` будут реализованы сеттеры для полей с данными, которые будут вызываться в момент вызова `render` и записывать данные в необходимые DOM элементы.  
`setImage(element: HTMLImageElement, src: string, alt?: string): void` - утилитарный метод для модификации DOM-элементов `<img>`

#### Класс Api

Содержит в себе базовую логику отправки запросов.

Конструктор:  
`constructor(baseUrl: string, options: RequestInit = {})` - В конструктор передается базовый адрес сервера и опциональный объект с заголовками запросов.

Поля класса:  
`baseUrl: string` - базовый адрес сервера  
`options: RequestInit` - объект с заголовками, которые будут использованы для запросов.

Методы:  
`get(uri: string): Promise<object>` - выполняет GET запрос на переданный в параметрах ендпоинт и возвращает промис с объектом, которым ответил сервер  
`post(uri: string, data: object, method: ApiPostMethods = 'POST'): Promise<object>` - принимает объект с данными, которые будут переданы в JSON в теле запроса, и отправляет эти данные на ендпоинт переданный как параметр при вызове метода. По умолчанию выполняется `POST` запрос, но метод запроса может быть переопределен заданием третьего параметра при вызове.  
`handleResponse(response: Response): Promise<object>` - защищенный метод проверяющий ответ сервера на корректность и возвращающий объект с данными полученный от сервера или отклоненный промис, в случае некорректных данных.

#### Класс EventEmitter

Брокер событий реализует паттерн "Наблюдатель", позволяющий отправлять события и подписываться на события, происходящие в системе. Класс используется для связи слоя данных и представления.

Конструктор класса не принимает параметров.

Поля класса:  
`_events: Map<string | RegExp, Set<Function>>)` - хранит коллекцию подписок на события. Ключи коллекции - названия событий или регулярное выражение, значения - коллекция функций обработчиков, которые будут вызваны при срабатывании события.

Методы класса:  
`on<T extends object>(event: EventName, callback: (data: T) => void): void` - подписка на событие, принимает название события и функцию обработчик.  
`emit<T extends object>(event: string, data?: T): void` - инициализация события. При вызове события в метод передается название события и объект с данными, который будет использован как аргумент для вызова обработчика.  
`trigger<T extends object>(event: string, context?: Partial<T>): (data: T) => void` - возвращает функцию, при вызове которой инициализируется требуемое в параметрах событие с передачей в него данных из второго параметра.

## Данные

Интерфейсы и типы определены в файле `src/types/index.ts`.

### Типы и интерфейсы

**TPayment** — тип оплаты.  
Возможные значения:  
`card` — оплата банковской картой  
`cash` — оплата наличными  

**IProduct** — описание товара.
Поля:  
`id: string` — уникальный идентификатор товара  
`description: string` — описание товара  
`image: string` — путь к изображению товара  
`title: string` — название товара  
`category: string` — категория товара  
`price: number | null` — цена товара (может быть `null`, если не продаётся)  

**IBuyer** — данные покупателя.
Поля:  
`payment: TPayment` — способ оплаты (`'card'` или `'cash'`)  
`email: string` — адрес электронной почты  
`phone: string` — номер телефона  
`address: string` — адрес доставки  

**IOrder** — заказ.
Поля:
`items: string[]` — список ID выбранных товаров
`total: number` — общая сумма заказа
`buyer: IBuyer` — данные покупателя

## Модели данных

### Модель каталога товаров (`ProductCatalogModel`)

Отвечает за хранение и работу с массивом товаров.

Поля:
`items: IProduct[]` — список всех товаров  
`selectedItem: IProduct | null` — выбранный товар  

Методы:
`setItems(items: IProduct[])` — сохраняет список товаров  
`getItems(): IProduct[]` — возвращает все товары  
`getItemById(id: string): IProduct | undefined` — поиск товара по ID  
`setSelectedItem(item: IProduct)` — сохраняет выбранный товар  
`getSelectedItem(): IProduct | null` — возвращает выбранный товар  

### Модель корзины (`ShoppingCartModel`)

Отвечает за хранение товаров в корзине и подсчёт итоговой суммы.

Поля:
`cart: IProduct[]` — список товаров в корзине  

Методы  
`getItems(): IProduct[]` — возвращает список товаров в корзине  
`addItem(item: IProduct)` — добавляет товар в корзину  
`removeItem(item: IProduct)` — удаляет товар из корзины  
`clear()` — очищает корзину  
`getTotal(): number` — вычисляет общую сумму заказа  
`getCount(): number` — возвращает количество товаров в корзине  
`isInCart(id: string): boolean` — проверяет, есть ли товар в корзине  

### Модель покупателя (`BuyerModel`)

Отвечает за хранение и валидацию данных покупателя.

Поля:
`data: Partial<IBuyer>` — объект с введёнными данными покупателя  

Методы:
`setData(newData: Partial<IBuyer>)` — обновляет данные (можно частично)  
`getData(): Partial<IBuyer>` — возвращает текущие данные покупателя  
`clear()` — очищает данные
`validate(): Record<keyof IBuyer, string>` — проверяет корректность введённых данных (возвращает объект с ошибками) 

### Слой коммуникации

#### Класс `StallAPI`

Определён в файле `src/components/base/StallAPI.ts`
Представляет собой обёртку над базовым API-интерфейсом и отвечает за сетевое взаимодействие с сервером интернет-магазина: получение списка товаров и оформление заказа. Использует экземпляр класса, реализующего интерфейс IApi.

Конструктор

`constructor(api: IApi)` — принимает экземпляр API-клиента, который инкапсулирует логику HTTP-запросов.

Поля класса

`api: IApi` — экземпляр API-клиента, используемого для выполнения запросов к серверу.

Методы класса

`fetchProducts(): Promise<IProduct[]>` — выполняет GET-запрос к эндпоинту /product/ и возвращает массив объектов товаров. Используется для загрузки каталога продуктов.

`sendOrder(order: IOrderRequest): Promise<IOrderResponse>` — отправляет заказ на сервер по эндпоинту /order/, передавая объект заказа в теле запроса. Возвращает промис с ответом сервера, содержащим подтверждённые данные заказа.

### Модуль `CardBasket`

#### Класс `CardBasket`

Карточка товара для корзины. Наследуется от `CardBase<ICardBasketData>` и отображает информацию о товаре в списке покупок, включая название, цену и номер позиции. Обеспечивает функционал удаления товара из корзины через события.

Конструктор:
`constructor(container: HTMLElement, props: ICardBasketData, events: IEvents)` — принимает:
- `container: HTMLElement` — DOM-элемент, в котором будет отображаться карточка
- `props: ICardBasketData` — объект с данными товара для корзины, включая индекс (index)
- `events: IEvents` — объект событий для взаимодействия с другими компонентами

Поля класса:
- `index: number` — порядковый номер товара в корзине

Методы класса
- `render(): HTMLElement`
Формирует DOM-элемент карточки корзины на основе шаблона `#card-basket`.
- Отображает порядковый номер товара (`.basket__item-index`)
- Отображает название товара (`.card__title`)
- Отображает цену товара (`.card__price`) с форматированием через `formatPrice`
- Добавляет обработчик на кнопку удаления (`.basket__item-delete`), который вызывает событие card:remove с ID товара
- Сохраняет данные карточки в dataset через метод `setCardData`
- `setIndex(index: number): void`
Обновляет порядковый номер товара в корзине.
- `getIndex(): number`
Возвращает текущий порядковый номер товара в корзине.
- `getPrice(): number`
Возвращает цену товара. Если цена отсутствует, возвращает 0.

### Модуль `CardGallery`

#### Класс `CardGallery`

Карточка товара для галереи каталога. Наследуется от `CardBase<IProduct>` и отображает информацию о товаре на странице каталога, включая название, категорию, изображение и цену. Поддерживает взаимодействие через события при клике на карточку.

Конструктор:
`constructor(container: HTMLElement, property: IProduct, events: IEvents)` — принимает:
- `container: HTMLElement` — DOM-элемент, в котором будет отображаться карточка
- `property: IProduct` — объект товара для отображения
- `events: IEvents` — объект событий для взаимодействия с другими компонентами

Методы класса
- `render(): HTMLElement`
Формирует DOM-элемент карточки каталога на основе шаблона #card-catalog.
- Добавляет название товара (`.card__title`)
- Добавляет категорию (`.card__category`) с соответствующим CSS-классом из `categoryMap`
- Добавляет изображение товара (`.card__image`) с использованием метода `setImage`. Изображение конвертируется в формат .png
- Отображает цену товара (`.card__price`) с форматированием через `formatPrice`; если цена отсутствует, выводится "Бесценно"
- Сохраняет данные карточки в dataset через метод `setCardData`
- Добавляет обработчик события click, который вызывает событие `card:select` с ID товара


### Модуль `CardPreview`

Интерфейс `ICardPreviewData`

Расширяет `IProduct` для использования в карточке предпросмотра товара.

Поля:
- `inBasket: boolean` — состояние товара: находится ли в корзине
- `buttonText: string` — текст кнопки действия, например "Купить"

#### Класс `CardPreview`

Карточка товара для предпросмотра. Наследуется от `CardBase<ICardPreviewData>`.
Отображает название, описание, цену, изображение, категорию и кнопку добавления/удаления из корзины. Обеспечивает интерактивное управление состоянием товара в корзине через события.

Конструктор:
`constructor(container: HTMLElement, props: ICardPreviewData, events: IEvents)` — принимает:
- `container: HTMLElement` — DOM-элемент, в котором будет отображаться карточка
- `props: ICardPreviewData` — объект товара с информацией о состоянии корзины и текстом кнопки
- `events: IEvents` — объект событий для взаимодействия с другими компонентами

Поля класса:
- `inBasket: boolean` — хранит текущее состояние товара в корзине

Методы класса
- `render(): HTMLElement`
Формирует DOM-элемент карточки предпросмотра на основе шаблона #card-preview.
- Отображает название товара (`.card__title`)
- Отображает описание товара (`.card__text`)
- Отображает цену (`.card__price`) с форматированием через `formatPrice`; если цена отсутствует, выводится "Бесценно"
- Добавляет изображение товара (`.card__image`) с преобразованием в .png через метод `setImage`
- Добавляет категорию (`.card__category`) с соответствующим CSS-классом из `categoryMap`
- Кнопка (`.card__button`):
- Текст кнопки меняется в зависимости от состояния товара (`inBasket`)
- Если цена отсутствует, кнопка деактивируется
- При нажатии кнопки отправляются события `card:add` или `card:remove` и обновляется состояние `inBasket`
- После действия обновляется текст кнопки и отправляется событие `cart:changed`
- Сохраняет данные карточки в dataset через метод `setCardData`

### Модуль `FormBase`

Абстрактный класс `FormBase<T extends Partial<IBuyer>>`

Базовый класс для форм ввода данных покупателя. Наследуется от `Component` и обеспечивает:
- обработку отправки формы,
- проверку валидности полей,
- взаимодействие с событиями через `IEvents`.

Конструктор:
`constructor(container: HTMLElement, events: IEvents)` — принимает:
- `container: HTMLElement` — DOM-элемент, в котором размещается форма
- `events: IEvents` — объект событий для взаимодействия с другими компонентами

Поля класса:
- `formElement: HTMLFormElement` — HTML-форма
- `errorContainer: HTMLElement` — контейнер для отображения ошибок
- `submitButton: HTMLButtonElement` — кнопка отправки формы
- `events: IEvents` — объект событий
- `fieldsToValidate: (keyof IBuyer)[]` — список полей, подлежащих валидации

Методы класса
- `init(): void`
Инициализация обработчиков формы:
- Обработчик отправки (`submit`) с вызовом `checkValidity()` и `onSubmit()`
- Проверка валидности при вводе данных (`input`)
- Установка текста кнопки отправки через `setSubmitButtonText()`
- `setSubmitButtonText(): void`
Устанавливает текст кнопки сабмита, используя `getSubmitText()`
- `getSubmitText(): string` (абстрактный)
Должен возвращать текст кнопки отправки формы. Реализуется в наследуемых классах.
- `onSubmit(): void` (абстрактный)
Действия при успешной отправке формы. Реализуется в наследуемых классах.
- `checkValidity(): boolean` (абстрактный)
Проверка валидности всех полей формы. Должна возвращать true, если форма корректна.
- `resetForm?(): void` (опциональный, защищённый)
Метод для сброса формы (может быть реализован в наследниках).

### Модуль `FormContact`

Тип `IContactsFormData`

Тип данных формы контактов, содержит только поля контактов покупателя:
- `email: string` — адрес электронной почты
- `phone: string` — номер телефона

#### Класс `FormContact`

Форма ввода контактных данных покупателя. Наследуется от `FormBase<IContactsFormData>`.
Обеспечивает рендер формы, валидацию полей и взаимодействие через события с презентером или другими компонентами.

Конструктор:
`constructor(container: HTMLElement, events: IEvents)` — принимает:
- `container: HTMLElement` — DOM-элемент, в котором размещается форма
- `events: IEvents` — объект событий для взаимодействия с другими компонентами

Поля класса:
- `contactsTemplate: HTMLElement` — шаблон формы
- `emailInput: HTMLInputElement` — поле ввода email
- `phoneInput: HTMLInputElement` — поле ввода телефона

Методы класса
- `createTemplate(): HTMLElement`
Создаёт DOM-шаблон формы из шаблона #contacts, инициализирует поля, кнопку отправки и контейнер ошибок, а также запускает методы initFields и initSubmit.
- `render(data?: IContactsFormData): HTMLElement`
Возвращает DOM-элемент формы.
- Синхронизирует значения полей с переданными данными
- Вызывает событие `contacts:requestValidation` для проверки валидности
- `initFields(): void`
Инициализирует обработчики событий input для полей email и телефона. При изменении значения вызывается событие contacts:fieldChange с полем и новым значением.
- `initSubmit(): void`
Инициализирует обработчик отправки формы (submit), который предотвращает стандартное поведение и вызывает событие contacts:submit.
- `validate(errors: Partial<Record<keyof IContactsFormData, string>>): boolean`
Выполняет валидацию формы по переданным ошибкам.
- Если есть ошибки, выводит сообщение в errorContainer и блокирует кнопку отправки
- Если ошибок нет — очищает контейнер ошибок и разблокирует кнопку
- Возвращает true, если форма валидна, иначе false
- `checkValidity(): boolean`
Проверяет валидность формы, вызывая событие `contacts:requestValidation` и возвращая true, если кнопка отправки активна.
- `onSubmit(): void` (переопределено)
Действия при успешной отправке формы. Здесь реализован пустой метод, т.к. обработка выполняется через события.
- `getSubmitText(): string`
Возвращает текст кнопки отправки: "Оплатить"

### Модуль `FormOrder`

Тип `IOrderFormData`

Тип данных формы заказа, содержит только необходимые поля:
- `payment: TPayment` — выбранный способ оплаты ('card' или 'cash')
- `address: string` — адрес доставки

#### Класс `FormOrder`

Форма оформления заказа. Наследуется от `FormBase<IOrderFormData>`.
Обеспечивает рендер формы, выбор способа оплаты, ввод адреса, валидацию полей и взаимодействие через события с презентером или другими компонентами.

Конструктор:
`constructor(container: HTMLElement, events: IEvents)` — принимает:
- `container: HTMLElement` — DOM-элемент, в котором размещается форма
- `events: IEvents` — объект событий для взаимодействия с другими компонентами

Поля класса:
- `orderTemplate: HTMLElement` — шаблон формы
- `paymentButtons: HTMLButtonElement[]` — кнопки выбора способа оплаты
- `addressInput: HTMLInputElement` — поле ввода адреса
- `selectedPayment: TPayment | null` — выбранный способ оплаты

Методы класса
- `createTemplate(): HTMLElement`
Создаёт DOM-шаблон формы из шаблона #order, инициализирует поля, кнопки оплаты, кнопку отправки и контейнер ошибок, а также запускает методы initFields и initSubmit.
- `render(data?: IOrderFormData): HTMLElement`
Возвращает DOM-элемент формы.
- Синхронизирует значения полей с переданными данными (payment и address)
- Вызывает событие order:requestValidation для проверки валидности
- `getPaymentButtons(): HTMLButtonElement[]`
Возвращает массив кнопок выбора способа оплаты. Кэширует результат после первого запроса.
- `updatePaymentButtons(): void`
Обновляет визуальное состояние кнопок оплаты, подсвечивая выбранную кнопку.
- `initFields(): void`
Инициализирует обработчики кликов для кнопок оплаты и ввода адреса. При изменении значений вызываются события order:paymentChange, order:addressChange и order:requestValidation.
- initSubmit(): void`
Инициализирует обработчики отправки формы и клика по кнопке сабмита.
- Вызывает событие `order:requestValidation`
- После короткой задержки эмитит событие order:submit
- `validate(errors: Partial<Record<keyof IOrderFormData, string>>): boolean`
Выполняет валидацию формы по переданным ошибкам.
- Если есть ошибки, выводит сообщение в `errorContainer` и блокирует кнопку отправки
- Если ошибок нет — очищает контейнер ошибок и разблокирует кнопку
- Возвращает true, если форма валидна, иначе false
- `checkValidity(): boolean`
Проверяет валидность формы, вызывая событие order:requestValidation и возвращая true, если кнопка отправки активна.
- `onSubmit(): void` (переопределено)
Действия при успешной отправке формы. Здесь реализован пустой метод, т.к. обработка выполняется через события.
- `getSubmitText(): string`
Возвращает текст кнопки отправки: "Далее"

### Модуль `ViewBasket`

#### Класс `ViewBasket`

Компонент отображения корзины покупок. Наследуется от `Component<{}>`.
Отвечает за визуальное представление товаров в корзине, итоговую сумму и кнопку перехода к оформлению заказа. Обеспечивает взаимодействие через события.

Конструктор:
`constructor(events: IEvents)` — принимает:
- `events: IEvents` — объект событий для взаимодействия с другими компонентами

Поля класса:
- `events: IEvents` — объект событий
- `containerBasket: HTMLElement` — контейнер корзины
- `listContainer: HTMLElement` — контейнер для списка товаров
- `totalPriceElement: HTMLElement` — элемент для отображения итоговой суммы
- `orderButton: HTMLButtonElement` — кнопка перехода к оформлению заказа

Методы класса
- `setItems(items: HTMLElement[]): void`
Устанавливает список товаров в корзине.
- Если список пустой, выводит сообщение "Корзина пуста" и блокирует кнопку `orderButton`
- Иначе заменяет содержимое `listContainer` переданными элементами и активирует кнопку `orderButton`
- `setTotalPrice(total: number): void`
Устанавливает текст итоговой суммы покупок в формате `${total}` синапсов
- `render(): HTMLElement`
Возвращает контейнер корзины для вставки в DOM


### Модуль `ViewGallery`

#### Класс `ViewGallery`

Компонент отображения галереи каталога товаров. Наследуется от `Component<{}>`.
Отвечает за визуальное представление списка товаров на странице каталога и взаимодействует с карточками товаров (`CardGallery`).

Конструктор:
`constructor(container: HTMLElement)` — принимает:
- `container: HTMLElement` — DOM-элемент, в котором будет отображаться галерея

Методы и свойства класса
- `set itemElement(items: CardGallery[])`
Устанавливает элементы галереи.
- При присвоении массива объектов `CardGallery` вызывает метод `render()` для каждого элемента и заменяет содержимое контейнера на эти карточки
- `render(): HTMLElement`
Возвращает контейнер галереи для вставки в DOM

### Модуль `ViewHeader`

Интерфейс `IHeader`

Интерфейс данных для шапки сайта.

Поля:
- `counter: number` — текущее количество товаров в корзине

#### Класс `ViewHeader`

Компонент отображения шапки сайта. Наследуется от `Component<IHeader>`.
Отвечает за отображение количества товаров в корзине и обработку клика по кнопке корзины через события.

Конструктор:
`constructor(events: IEvents, container: HTMLElement)` — принимает:
- `events: IEvents` — объект событий для взаимодействия с другими компонентами
- `container: HTMLElement` — DOM-элемент шапки сайта

Поля класса:
- `counterElement: HTMLElement` — элемент для отображения количества товаров в корзине
- `basketButton: HTMLButtonElement` — кнопка открытия корзины

Методы и свойства класса
- `set counter(value: number)`
Устанавливает отображаемое количество товаров в корзине
- `get counter(): number`
Возвращает текущее количество товаров в корзине, извлекая его из `counterElement`
- В конструкторе добавлен обработчик клика по `basketButton`, который вызывает событие `basket:open`

### Модуль `ViewModal`

#### Класс `ViewModal`

Компонент универсального модального окна. Наследуется от `Component<{}>`.
Отвечает за отображение модального окна с динамическим контентом и управление его открытием/закрытием.

Конструктор:
`constructor(container: HTMLElement, events: IEvents)` — принимает:
- `container: HTMLElement` — корневой контейнер модального окна
- `events: IEvents` — объект событий для взаимодействия с другими компонентами

Поля класса:
- `closeButton: HTMLButtonElement` — кнопка закрытия модального окна
- `contentContainer: HTMLElement` — контейнер для содержимого модального окна

Методы класса
- `open(content: HTMLElement)`
Открывает модальное окно и вставляет переданный content в `contentContainer`.
- Добавляет класс `modal_active` для отображения
- Эмитит событие `modal:open`
- `close()`
Закрывает модальное окно, удаляя класс `modal_active`.
- Эмитит событие `modal:close`
- `get content(): HTMLElement`
Возвращает текущий контейнер с контентом модального окна

Особенности
- Модальное окно закрывается при клике по кнопке `closeButton`
- Модальное окно также закрывается при клике вне содержимого (по фону контейнера)

### Модуль `ViewSuccess`

#### Класс `ViewSuccess`

Компонент отображения успешного оформления заказа. Наследуется от Component<{}>.
Отвечает за визуальное отображение информации об успешной оплате и позволяет закрыть модальное окно после просмотра.

Конструктор:
`constructor(container: HTMLElement, events: IEvents)` — принимает:
- `container: HTMLElement` — DOM-элемент для вставки шаблона
- `events: IEvents` — объект событий для взаимодействия с другими компонентами

Поля класса:
- `events: IEvents` — объект событий
- `successTemplate: HTMLElement` — шаблон отображения успешного оформления
- `descriptionElement: HTMLElement` — элемент для отображения текста с суммой списания
- `closeButton: HTMLButtonElement` — кнопка закрытия шаблона

Методы класса
- `createTemplate(): void`
Создаёт DOM-шаблон `#success`, инициализирует элементы `descriptionElement` и `closeButton`.
Добавляет обработчик клика по кнопке закрытия, который эмитит события:
- `modal:close` — закрытие модального окна
- `catalog:open` — открытие каталога
- `render(total?: number): HTMLElement`
Возвращает DOM-элемент шаблона.
- Если передан параметр `total`, отображает текст: `"Списано ${total} синапсов"`
